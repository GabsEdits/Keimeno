<!-- 
Early Alpha - v0.1 - v0.3
Alpha - v0.4 - v0.6
Beta - v0.7 - v0.9
Stable v1.0+
-->
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="./style.css">
    <link rel="preconnect" href="https://rsms.me/">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="icon" type="image/png" sizes="180x180" href="/logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Keímeno</title>

</head>
<body>
    <h1 style="font-weight: bolder;" id="hover-element">Keímeno</h1>
    <p id="desc">Just Text. Just Notes. Save.</p>
    <p id="version" onclick="toggleAMOLEDMode()">v0.4 Alpha</p>

    <div id="editableArea" contenteditable="true" placeholder="Click and type your text here"></div>

    <div class="under-construction"></div>
    <p id="owner">Made with ❤️ by <span>Gabs</span></p>
    <p class="github"><a href="https://github.com/GabsEdits/keimeno" aria-label="Check out the source code"><i class="fab fa-github"></i></a></p>
    <div class="keyboard-shortcuts-toggle" onclick="toggleKeyboardShortcuts()">
        <i class="fas fa-keyboard"></i>
    </div>

    <div class="keyboard-shortcut-modal-background" onclick="toggleKeyboardShortcuts()"></div>
    <div class="keyboard-shortcuts-container">
        <h2 class="keyboard-shortcuts-title">Keyboard Shortcuts</h2>
        <div class="keyboard-shortcut">
            <div class="keyboard-shortcut-key">Ctrl + B</div>
            <div class="keyboard-shortcut-description">Toggle Bold</div>
        </div>
        <div class="keyboard-shortcut">
            <div class="keyboard-shortcut-key">Ctrl + I</div>
            <div class="keyboard-shortcut-description">Toggle Italic</div>
        </div>
        <div class="keyboard-shortcut">
            <div class="keyboard-shortcut-key">Ctrl + Alt + Q</div>
            <div class="keyboard-shortcut-description">Toggle Spoiler</div>
        </div>
        <div class="keyboard-shortcut">
            <div class="keyboard-shortcut-key">Ctrl + Alt + C</div>
            <div class="keyboard-shortcut-description">Clear All Text <span style="color: gray; font-size: 10px; text-align: left; font-weight: 600;">(Coming Soon)</span></div>
        </div>
    <script>
        // JavaScript code to enable the input field to display entered text
  var editableArea = document.getElementById("editableArea");

// Load the saved text from local storage on page load
window.addEventListener("load", function () {
    var savedText = localStorage.getItem("savedText");
    if (savedText) {
        editableArea.innerHTML = savedText;
    }
});

// Save the text to local storage when the user types or makes changes
editableArea.addEventListener("input", function () {
    var text = editableArea.innerHTML;
    localStorage.setItem("savedText", text);
});


// Function to modify text on specific keystrokes
editableArea.addEventListener("keydown", function (event) {
    // Check for bold keystrokes: Ctrl + B or Command + B
    if ((event.ctrlKey || event.metaKey) && event.key === "b") {
        event.preventDefault(); // Prevent the default browser behavior
        document.execCommand("bold", false, null); // Toggle bold formatting
    }

    // Check for italic keystrokes: Ctrl + I or Command + I
    if ((event.ctrlKey || event.metaKey) && event.key === "i") {
        event.preventDefault(); // Prevent the default browser behavior
        document.execCommand("italic", false, null); // Toggle italic formatting
    }

    // Prevent bold formatting when pressing Enter
    if (event.key === "Enter") {
        event.preventDefault(); // Prevent the default browser behavior
        insertNewLine();
    }
});

// Function to insert a new line at the current cursor position
function insertNewLine() {
    var selection = window.getSelection();
    var range = selection.getRangeAt(0);
    var br = document.createElement("br");
    range.insertNode(br);
    range.collapse(false);
    selection.removeAllRanges();
    selection.addRange(range);
}

        // Toggle AMOLED mode
        function toggleAMOLEDMode() {
            document.body.classList.toggle("amoled-mode");
        }

        // Function to clear all the text in the editable area
        function clearText() {
            editableArea.innerHTML = "";
        }

        // Attach the clearText() function to the logo click event
        var logo = document.querySelector("h1");
        logo.addEventListener("click", clearText);

        function handleKeyDown(event) {
            // Check if the Ctrl and Alt keys are pressed simultaneously and the C key is pressed
            if (event.ctrlKey && event.altKey && event.key === "c") {
                event.preventDefault(); // Prevent the default browser behavior
                clearText(); // Call the clearText() function
            }
        }

        // Attach the handleKeyDown() function to the keydown event on the document
        document.addEventListener("keydown", handleKeyDown);

        // Function to toggle the spoiler text
        function toggleSpoiler() {
            this.classList.toggle("revealed");
        }

        // Function to handle keydown event and check for the keyboard shortcut
        function handleKeyDown(event) {
            // Check if the Ctrl, Alt, and Q keys are pressed simultaneously
            if (event.ctrlKey && event.altKey && event.key === "q") {
                event.preventDefault(); // Prevent the default browser behavior
                var selection = window.getSelection();
                var range = selection.getRangeAt(0);

                // Create a new span element with the spoiler class and replace the selected range with it
                var spoiler = document.createElement("span");
                spoiler.classList.add("spoiler");
                spoiler.classList.add("revealed"); // Add the revealed class to immediately show the spoiler
                spoiler.textContent = range.toString();
                range.deleteContents();
                range.insertNode(spoiler);

                // Set the selection to the newly created spoiler element
                range.selectNodeContents(spoiler);
                selection.removeAllRanges();
                selection.addRange(range);

                // Attach the click event listener to the newly created spoiler element
                spoiler.addEventListener("click", toggleSpoiler);
            }
        }

        // Attach the handleKeyDown() function to the keydown event on the editable area
        editableArea.addEventListener("keydown", handleKeyDown);

        const hoverElement = document.getElementById('hover-element');
const originalColor = window.getComputedStyle(hoverElement).color;

hoverElement.addEventListener('mouseenter', function() {
  const randomColor = getRandomColor();
  hoverElement.style.color = randomColor;
});

hoverElement.addEventListener('mouseleave', function() {
  hoverElement.style.color = originalColor;
});

function getRandomColor() {
  const letters = '0123456789ABCDEF';
  let color = '#';
  for (let i = 0; i < 6; i++) {
    color += letters[Math.floor(Math.random() * 16)];
  }
  return color;
}

function toggleKeyboardShortcuts() {
            const modal = document.querySelector('.keyboard-shortcuts-container');
            const modalBackground = document.querySelector('.keyboard-shortcut-modal-background');
            modal.classList.toggle('show');
            modalBackground.classList.toggle('show');
        }
    </script>
</body>
</html>
